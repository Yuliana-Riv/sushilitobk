"use strict";(self["webpackChunksoma_ft"]=self["webpackChunksoma_ft"]||[]).push([[972],{3972:function(t,e,s){s.r(e),s.d(e,{default:function(){return d}});var i=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"login_view"}},[e("div",{staticClass:"login_cnt"},[e("div",{staticClass:"login_bx"},[t._m(0),e("div",{staticClass:"login_frm"},[e("p",{staticClass:"text_auth"},[t._v("Ingresa el código que fue enviado a tu correo electrónico")]),e("form",{on:{submit:function(e){return e.preventDefault(),t.verify()}}},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.code_form,expression:"code_form"}],attrs:{id:"code",type:"text",name:"code",required:"",placeholder:"Código"},domProps:{value:t.code_form},on:{input:function(e){e.target.composing||(t.code_form=e.target.value)}}}),t._m(1),e("p",{staticClass:"form-reenviar-codigo"},[t._v("¿Problemas? "),e("span",{on:{click:function(e){return t.sendCode()}}},[t._v(" Solicita un nuevo código aquí")])]),"error"==t.status?e("div",{staticClass:"message_error"},[e("p",[t._v(" "+t._s(this.message)+" ")]),e("img",{attrs:{src:s(8474)}})]):t._e()])])])])])},r=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"logo_bx"},[e("img",{attrs:{src:s(4477),alt:"Logo SOMA INMOVILIARIA"}})])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"btn_login"},[e("button",{attrs:{type:"submit"}},[t._v("Verificar")])])}],a=(s(7658),s(7270)),o={name:"autentificacion",data:()=>({code_form:"",status:"",message:""}),created(){this.getIdentity()},computed:{identity(){return this.$store.getters["admin/getIdentity"]}},methods:{getIdentity:async function(){let t=await this.$store.dispatch("admin/getData");return t},delMsg(){this.status="",this.message=""},refresh:function(){setTimeout((()=>this.delMsg()),1500)},async verify(){this.getIdentity();let t=this.identity,e=String(t.code),s=String(t.sub),i={id:e,id_user:s,type:t.role,code:this.code_form},r=await this.$store.dispatch("main/addItem",{option:"session",item:i});if(console.log(r),"success"==r.status){let t=await a.Z.createAuth();"success"==t.status?(await a.Z.setAth(t.result),this.$router.push("/administrador").catch((t=>{}))):(this.status="error",this.message="Ha ocurrido un error.",this.refresh())}else this.status="error",this.message="El codigo no coincide.",this.refresh()},async sendCode(){this.getIdentity();let t=this.identity;try{await this.$store.dispatch("admin/resendCode",{email:t.email,name:t.name,code:t.code}),"success"!=result.data.status&&(localStorage.removeItem("tkn"),this.$router.push("/login").catch((t=>{})))}catch(e){this.status="error"}}}},n=o,c=s(1001),u=(0,c.Z)(n,i,r,!1,null,"30ce20ef",null),d=u.exports},4477:function(t,e,s){t.exports=s.p+"img/Logo.e581d9bc.svg"},8474:function(t){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACUAAAAjCAYAAAATx8MeAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAGtSURBVHgBzZaBcYMwDEVFrgNkBGeDdIKyQbtB2CBkgnSD0gmSTZpM0BHIBmEDVTqbHKHYAgRO3p2PmHPw50vIAlCAiIbGF40rWkoaB74Pj4A2XjfEtOH7a4iJc6jEMCxsCbFwIerDAWLgXBrC/GEc4FLND8wJbZDiOFKYC5STO65b9OBM2LjE2G4FNuX7xq0JlYoSpkRwKW+tzfuu9bGQFqAtgPvAkkqYN9ljj4IqiiK2NAxMAwsS3QqKcrnSy/IBbCW3JKc4bFOfX1I6+EU5lzKYhxwD7U3IqeDbTID3sO4UNbNLNamvoPqcitNyeKLxTxQXSrqkEIdOt7qcmjuXxP3uRDmXDMQldfveaDs1xqWlMO9D9/GDcmvio8R+XYLEZ60lqR9GF27EDIznovw/H+SrJEmqOnwb0OeSAR23wzpxLmkbsG8aJxofYF9Qw4pDV6COu0JL8yPqKDh876Dj3JqfQMeGRRnQ8SbMh7J8AZv1mp6JSwlfz05QBjoqTvQCbMv7LBzrr+8Xpu8wx8BRe11QsbrQjx08Hha0c3osaI8I/pyvGBfer8BGe/wHyJkGrKvgwpoAAAAASUVORK5CYII="}}]);
//# sourceMappingURL=972.95ed2076.js.map