{"version":3,"file":"js/99.59e1d11f.js","mappings":"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","sources":["webpack://soma_ft/./src/views/Autentificacion.vue","webpack://soma_ft/src/views/Autentificacion.vue","webpack://soma_ft/./src/views/Autentificacion.vue?245c","webpack://soma_ft/./src/views/Autentificacion.vue?ac70"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{attrs:{\"id\":\"login_view\"}},[_c('div',{staticClass:\"login_cnt\"},[_c('div',{staticClass:\"login_bx\"},[_vm._m(0),_c('div',{staticClass:\"login_frm\"},[_c('p',{staticClass:\"text_auth\"},[_vm._v(\"Ingresa el código que fue enviado a tu correo electrónico\")]),_c('form',{on:{\"submit\":function($event){$event.preventDefault();return _vm.verify()}}},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.code_form),expression:\"code_form\"}],attrs:{\"id\":\"code\",\"type\":\"text\",\"name\":\"code\",\"required\":\"\",\"placeholder\":\"Código\"},domProps:{\"value\":(_vm.code_form)},on:{\"input\":function($event){if($event.target.composing)return;_vm.code_form=$event.target.value}}}),_vm._m(1),_c('p',{staticClass:\"form-reenviar-codigo\"},[_vm._v(\"¿Problemas? \"),_c('span',{on:{\"click\":function($event){return _vm.sendCode()}}},[_vm._v(\" Solicita un nuevo código aquí\")])]),(_vm.status=='error')?_c('div',{staticClass:\"message_error\"},[_c('p',[_vm._v(\" \"+_vm._s(this.message)+\" \")]),_c('img',{attrs:{\"src\":require(\"../assets/default/alert.png\")}})]):_vm._e()])])])])])\n}\nvar staticRenderFns = [function (){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"logo_bx\"},[_c('img',{attrs:{\"src\":require(\"../assets/login/Logo.svg\"),\"alt\":\"Logo SOMA INMOVILIARIA\"}})])\n},function (){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"btn_login\"},[_c('button',{attrs:{\"type\":\"submit\"}},[_vm._v(\"Verificar\")])])\n}]\n\nexport { render, staticRenderFns }","<template>\n   <div id=\"login_view\">\n      <div class=\"login_cnt\">\n\n       \n\n        <div class=\"login_bx\">\n\n          <div class=\"logo_bx\">\n            <img src=\"../assets/login/Logo.svg\" alt=\"Logo SOMA INMOVILIARIA\">\n          </div>\n\n         \n            <div class=\"login_frm\">\n              <p class=\"text_auth\">Ingresa el código que fue enviado a tu correo electrónico</p>\n              <form @submit.prevent=\" verify() \">\n                <input \n                      id=\"code\" \n                      v-model=\"code_form\" \n                      type=\"text\" \n                      name=\"code\" \n                      required\n                      placeholder=\"Código\"\n                  >\n               \n                 \n                  \n                \n\n               <div class=\"btn_login\">\n                <button  type=\"submit\">Verificar</button>\n\n               </div>\n\n               <p class=\"form-reenviar-codigo\" >¿Problemas? <span @click=\"sendCode()\"> Solicita un nuevo código aquí</span> </p>\n\n                <div  class=\"message_error\" v-if=\"status=='error'\">\n                    <p>\n                      {{this.message}}\n                    </p>\n                    <img src=\"../assets/default/alert.png\">\n                </div>\n              </form>\n            </div>\n          </div>\n\n      \n\n       \n        \n         \n       </div>\n    </div>\n\n</template>\n<script>\n\n\nimport userService from '../services/user.service'\n\nexport default {\n  name: 'autentificacion',\n  data: () => ({\n    code_form: \"\",\n    status:'',\n    message:''\n  }),\n  created(){\n this.getIdentity()\n  },\n  computed:{\n    identity() {\n      return this.$store.getters['admin/getIdentity'];\n    },\n  },\n  methods: {\n      getIdentity: async function (){\n          let response =  await this.$store.dispatch(\"admin/getData\");\n          return response\n      },\n\n      delMsg(){\n        this.status='' \n        this.message=''\n      },\n       refresh: function () {\n        setTimeout(() => this.delMsg(), 1500);\n        },\n\n\n    async  verify(){\n        this.getIdentity()\n        let identity= this.identity\n      \n   \n          let code = String(identity.code)\n          let id = String(identity.sub)\n\n             let data ={\n                \"id\":code,\n                \"id_user\":id,\n                \"type\":identity.role,\n                \"code\":this.code_form\n               \n              }\n\n                  \n\n            let result = await this.$store.dispatch(\"main/addItem\",  {option:'session', item:data});\n                   \n                  console.log(result)\n\n\n \n          if(result.status == 'success'){\n             let ath = await userService.createAuth();\n\n             if(ath.status=='success'){\n               await userService.setAth(ath.result);\n                    \n               this.$router.push(\"/administrador\").catch(err => {});\n             }else{\n               this.status ='error'\n               this.message='Ha ocurrido un error.'\n                  this.refresh()\n             }\n             \n            \n       \n             \n          }else{\n            this.status='error' \n            this.message='El codigo no coincide.'\n             this.refresh()\n          }\n          \n      },\n      \n     \n\n     \n      async sendCode() {\n        \n         this.getIdentity()\n        let identity= this.identity\n      try {\n        \n\n        await this.$store.dispatch(\"admin/resendCode\", {\n            email: identity.email,\n            name: identity.name,\n            code: identity.code\n        });\n        //console.log(identity.code);\n\n         if(result.data.status !='success'){\n             localStorage.removeItem('tkn')\n             this.$router.push(\"/login\").catch(err => {});\n         }\n       \n      } catch (error) {\n        this.status ='error'\n      }\n    }\n  }\n}\n</script>\n\n\n<style scoped>\n\n\n#login_view{\n    background: linear-gradient(222.39deg, #E40424 12.3%, #9B0016 76.14%);\n    height: 100vh;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n  }\n\n  .login_cnt{\n    background-color: white;\n    width: 28.153vw;\n    height: auto;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    border-radius: 1.047vw;\n    padding:  3.715vw  0vw;\n  }\n  .login_bx{\n    width: 20.565vw;\n    height: auto;\n  }\n\n  .logo_bx{\n    display: flex;\n    justify-content: center;\n  }.logo_bx img{\n    width: 13.710vw;\n    height: 8.111vw;\n    margin-bottom: 1.884vw;\n  }\n\n  p.text_auth{\n    color:rgba(228, 4, 36, 1);\n    font-family: var(--montserrat);\n    text-align: center;\n    margin: 0vw;\n    font-weight: 800;\n    margin-bottom: 1.832vw;\n    font-size: 0.942vw;\n  }\n  p.form-reenviar-codigo{\n    text-align: center;\n    color: rgba(87, 86, 86, 1);\n    font-size: 0.680vw;\n    font-weight: 600;\n    margin: 0vw;\n    margin-top: 1.936vw;\n  }\n  p.form-reenviar-codigo span{\n   color: rgba(68, 233, 200, 1);\n   cursor: pointer;\n  }\n\n\n  .login_frm input#code{\n    width: 89.7%;\n    border-radius: 1.570vw;\n    height: 2.721vw;\n    margin-bottom: 1.047vw;\n    border: 1px solid rgba(87, 86, 86, 1);\n    color: rgba(87, 86, 86, 1);\n    font-size: 0.680vw;\n    font-family: var(--montserrat);\n    font-weight: 600;\n    padding-left: 1.881vw;\n  }\n  .login_frm input::placeholder{\n    color: rgba(87, 86, 86, 1);\n  }\n\n  .btn_login{\n    display: flex;\n    justify-content: center;\n  }\n  .btn_login button{\n    background-color: #E40424;\n    font-weight: 800;\n    font-size: 0.733vw;\n    height: 3.140vw;\n    width: 16.065vw;\n    border: none;\n    border-radius: 2vw;\n    color: white;\n    font-family: var(--montserrat);\n    cursor: pointer;\n  }\n\n  .message_error{\n    display: flex;\n    background-color: #E40424;\n    justify-content: space-around;\n    align-items: center;\n    font-weight: 400;\n    font-size: 0.6vw;\n    color: white;\n    border-radius: 5vw;\n    margin-top: .5vw;\n    padding: .1vw 0vw;\n\n  }\n  .message_error img{\n    width: 1vw;\n\n  }\n\n@media (max-width: 768px) {\n    #login_view{\n      align-items: start;\n    }\n    .login_cnt{\n      width: 100vw;\n      border-radius: 0vw;\n      padding-top: 10.769vw;\n      padding-bottom: 19.231vw;\n   }\n   .login_bx{\n     width: 70.049vw;\n   }\n\n   .logo_bx img{\n     width: 51.282vw;\n     height: 30.256vw;\n     margin-bottom: 3.333vw;\n   }\n  \n   .login_frm input#code{\n    height: 12.869vw;\n    font-size: 3.333vw;\n    padding-left: 6.336vw;\n    border-radius: 10vw;\n    margin-bottom: 4.818vw;\n   }\n\n   p.text_auth{\n   margin-bottom: 4.103vw;\n    font-size: 3.590vw;\n    margin-top: 4vw;\n  }\n  p.form-reenviar-codigo{\n  \n    font-size: 3.846vw;\n    \n    margin-top: 9.744vw;\n  }\n  p.form-reenviar-codigo span{\n    display: block;\n  width: 100%;\n}\n\n\n    .btn_login button {\n      height:12.821vw;\n      width: 100vw;\n      border-radius: 10vw;\n      font-size: 3.590vw;\n    }\n\n    .message_error{\n      height:6.821vw;\n      font-size: 2.333vw;\n      margin-top: 2vw;\n    }\n\n    .message_error img {\n      width: 2.622vw;\n}\n\n\n  }\n\n</style>\n","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Autentificacion.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Autentificacion.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Autentificacion.vue?vue&type=template&id=30ce20ef&scoped=true&\"\nimport script from \"./Autentificacion.vue?vue&type=script&lang=js&\"\nexport * from \"./Autentificacion.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Autentificacion.vue?vue&type=style&index=0&id=30ce20ef&prod&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"30ce20ef\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","attrs","staticClass","_m","_v","on","$event","preventDefault","verify","directives","name","rawName","value","code_form","expression","domProps","target","composing","sendCode","status","_s","message","require","_e","staticRenderFns","data","created","getIdentity","computed","identity","$store","getters","methods","response","dispatch","delMsg","refresh","setTimeout","code","String","id","sub","role","result","option","item","console","log","ath","userService","$router","push","catch","err","email","localStorage","removeItem","error","component"],"sourceRoot":""}