"use strict";(self["webpackChunksoma_ft"]=self["webpackChunksoma_ft"]||[]).push([[129],{129:function(t,s,e){e.r(s),e.d(s,{default:function(){return d}});var i=function(){var t=this,s=t._self._c;return s("div",{attrs:{id:"login_view"}},[s("div",{staticClass:"login_cnt"},[s("div",{staticClass:"login_bx"},[t._m(0),s("div",{staticClass:"login_frm"},[s("p",{staticClass:"text_auth"},[t._v("Ingresa el código que fue enviado a tu correo electrónico")]),s("form",{on:{submit:function(s){return s.preventDefault(),t.verify()}}},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.code_form,expression:"code_form"}],attrs:{id:"code",type:"text",name:"code",required:"",placeholder:"Código"},domProps:{value:t.code_form},on:{input:function(s){s.target.composing||(t.code_form=s.target.value)}}}),t._m(1),s("p",{staticClass:"form-reenviar-codigo"},[t._v("¿Problemas? "),s("span",{on:{click:function(s){return t.sendCode()}}},[t._v(" Solicita un nuevo código aquí")])]),"error"==t.status?s("div",{staticClass:"message_error"},[s("p",[t._v(" "+t._s(this.message)+" ")]),s("img",{attrs:{src:e(8474)}})]):t._e(),"success"==t.status&&this.message?s("div",{staticClass:"message_error"},[s("p",[t._v(" "+t._s(this.message)+" ")])]):t._e()])])])])])},a=[function(){var t=this,s=t._self._c;return s("div",{staticClass:"logo_bx"},[s("img",{attrs:{src:e(4477),alt:"Logo SOMA INMOVILIARIA"}})])},function(){var t=this,s=t._self._c;return s("div",{staticClass:"btn_login"},[s("button",{attrs:{type:"submit"}},[t._v("Verificar")])])}],o=(e(7658),e(7270)),r={name:"autentificacion",data:()=>({code_form:"",status:"",message:""}),created(){this.getIdentity()},computed:{identity(){return this.$store.getters["admin/getIdentity"]}},methods:{getIdentity:async function(){let t=await this.$store.dispatch("admin/getData");return t},wait:function(){setTimeout((()=>this.$router.go()),200)},delStatus:function(){setTimeout((()=>this.delMsgs()),1500)},delMsgs:function(){this.status="",this.message=""},async verify(){this.delMsgs(),this.getIdentity();let t=this.identity,s=String(t.code),e=String(t.sub),i={id:s,id_user:e,type:t.role,code:this.code_form},a=await this.$store.dispatch("main/addItem",{option:"session",item:i});if(console.log(a),"success"==a.status){let t=await o.Z.createAuth();"success"==t.status?(await o.Z.setAth(t.result),this.$router.push("/administrador").catch((t=>{}))):(this.status="error",this.message="Ha ocurrido un error.",this.delStatus())}else this.status="error",this.message="El codigo no coincide.",this.delStatus()},async sendCode(){this.delMsgs(),this.getIdentity();let t=this.identity;try{let s=await this.$store.dispatch("admin/resendCode",{email:t.email,name:t.name,code:t.code});"success"!=s.data.status?(localStorage.removeItem("tkn"),this.$router.push("/login").catch((t=>{}))):(this.status="success",this.message="Correo enviado a "+t.email,this.delStatus())}catch(s){this.status="error",this.message=s.message,this.delStatus()}}}},n=r,c=e(1001),u=(0,c.Z)(n,i,a,!1,null,"a7de6114",null),d=u.exports},4477:function(t,s,e){t.exports=e.p+"img/Logo.417a5b5e.svg"},8474:function(t){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACUAAAAjCAYAAAATx8MeAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAGtSURBVHgBzZaBcYMwDEVFrgNkBGeDdIKyQbtB2CBkgnSD0gmSTZpM0BHIBmEDVTqbHKHYAgRO3p2PmHPw50vIAlCAiIbGF40rWkoaB74Pj4A2XjfEtOH7a4iJc6jEMCxsCbFwIerDAWLgXBrC/GEc4FLND8wJbZDiOFKYC5STO65b9OBM2LjE2G4FNuX7xq0JlYoSpkRwKW+tzfuu9bGQFqAtgPvAkkqYN9ljj4IqiiK2NAxMAwsS3QqKcrnSy/IBbCW3JKc4bFOfX1I6+EU5lzKYhxwD7U3IqeDbTID3sO4UNbNLNamvoPqcitNyeKLxTxQXSrqkEIdOt7qcmjuXxP3uRDmXDMQldfveaDs1xqWlMO9D9/GDcmvio8R+XYLEZ60lqR9GF27EDIznovw/H+SrJEmqOnwb0OeSAR23wzpxLmkbsG8aJxofYF9Qw4pDV6COu0JL8yPqKDh876Dj3JqfQMeGRRnQ8SbMh7J8AZv1mp6JSwlfz05QBjoqTvQCbMv7LBzrr+8Xpu8wx8BRe11QsbrQjx08Hha0c3osaI8I/pyvGBfer8BGe/wHyJkGrKvgwpoAAAAASUVORK5CYII="}}]);
//# sourceMappingURL=129.5d476d06.js.map